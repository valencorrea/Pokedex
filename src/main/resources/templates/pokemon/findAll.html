<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">

	<head>
		<meta charset="UTF-8">
		<title th:text="${title}"></title>
	</head>
  	<body>

  	<h1 th:text="${title}"></h1>

	<button id="mostrar">mostrar pokemones</button>
  	<button id="ocultar">ocultar pokemones</button>

  	<br/>
  	<table id="tabla_pokemones">
	
		<thead>
			<tr>
		  		<th>ID</th>
			  	<th>NOMBRE</th>
			  	<th>NIVEL DE ARRIBO</th>
			</tr>
		</thead>

		<tbody>
			<tr th:each="pokemon: ${pokemones}">
			  	<td th:text="${pokemon.getId()}"></td>
			  	<td th:text="${pokemon.getNombre()}"></td>
			  	<td th:text="${pokemon.getNivel()}"></td>
			</tr>
		</tbody>

	</table>

	<button id="diurno">Modo Diurno</button>
	<button id="nocturno">Modo Nocturno</button>

	<ul id="atributos_pokemon">
		
		<button id="habilidad_boton">Ver habilidades</button> <!-- ver como agarrarme el objeto en vez del html con ajax -->

		<button id="tipo_boton">Ver tipos</button> <!-- ver como agarrarme el objeto en vez del html con ajax -->
		<button><a href="evolucion/">Ver evoluciones</a></button>
		<!-- <button><a href="tipo/">Ver tipos</a></button>-->
	</ul>

	<div id="contenidos_externos"></div>

	</body>

	<script
	  	src="https://code.jquery.com/jquery-3.6.0.min.js"
	  	integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
		crossorigin="anonymous">
	</script><!--con esto agrego jquery-->

	<script
		src="https://code.jquery.com/jquery-3.2.1.js"
		type="text/javascript">
	</script>

	<script>
	//$(document).ready(function() {

		var modo_diurno = true;

		$("td").mouseover(function(){
            $(this).css("background-color", "#ffe0e9");
        });
        $("td").mouseout(function(){
            if(modo_diurno == true){        
                $(this).css("background-color", "#FFFFFF");
            }
            else{
                $(this).css("background-color", "#696969");   
            }
        });


        $("th").mouseover(function(){
            $(this).css("background-color", "#ffa0bd");
        });
        $("th").mouseout(function(){
            if(modo_diurno == true){        
                $(this).css("background-color", "#FFFFFF");
            }
            else{
                $(this).css("background-color", "#696969");   
            }
        });

	    $('#nocturno').click(function(){
            $('td').css('background-color', '#696969');
            $('th').css('background-color', '#696969');
            $('body').css('background-color', '#696969');
            modo_diurno = false;
        });   
        $('#diurno').click(function(){
            $('td').css('background-color', '#FFFFFF');
            $('th').css('background-color', '#FFFFFF');
            $('body').css('background-color', '#FFFFFF');
            modo_diurno = true;
        });  


		$("#mostrar").on('click', function() {
			$("#tabla_pokemones").slideDown();
		});
		$("#ocultar").on('click', function() {
			$("#tabla_pokemones").slideUp();
		});


		$("#atributos_pokemon a").click(function(event){ // forma vieja
			event.preventDefault();
			var url = $(this).attr("href");

			$("#contenidos_externos").load(url);
		});




		var xmlhttp;
		if(window.XMLHttpRequest){
			xmlhttp = new XMLHttpRequest();
			console.log(xmlhttp);
		}

		//xmlhttp.onreadystatechange = acciones;
		//function acciones(){//se esta llamando ni bien arranca D:
			$("#habilidad_boton").click(function(){
				if(xmlhttp.readystate == 4 && xmlhttp.status ==200){
					//document.getElementById("#contenidos_externos").innerHTML = xmlhttp.responseText; //innerHTML asigna el contenido al # - responseText retorna la respuesta como texto
					
					//var habilidades = JSON.parse(xmlhttp);
					var habilidades = JSON.parse(this.responseText);
					alert("hola");
				}

				xmlhttp.open("GET", "habilidad/", true);
				xmlhttp.send();
			});

		//}

		/*$.getJSON('/pokemon/habilidad/', function(resp) {
		    $.each(resp, function(k, v) {
		        console.log(k + ' : ' + v);
			}); 
		});*/

		/*$.ajax({
			$('#atributos_pokemon form').attr('action')
		});*/

        /*$.ajax({
            url: "/pokemon/habilidad/", //ruta a donde hago la peticion
            type: "GET", // tipo por defecto del @RequestMapping
            //dataType: 'json',
            success: function(result){
            	$("#habilidad_boton").click(function(result){
					event.preventDefault();
            		$('<h1/>').text(result.title).appendTo('body');
				        $('<div class="content"/>').html(result.html).appendTo('body');
            		//var arraydata = eval(result);
            		//$("#contenidos_externos").load("#result");

//        			for(var i=0; i < 5; i++){
//                    	console.log(result[i]);
//                	}

            		//$.each(arraydata, function(i, arraydata, result){
					//	$("#contenidos_externos").load("#arraydata");
		        	//});
		        });	
            }
        });*/
/*
        $.ajax({
            url: "/pokemon/tipo/", 
            type: "GET", 
            success: function(result){
            	$("#tipo_boton").click(function(result){
            		$("#contenidos_externos").load("#result");
		        });	
            }
        });*/

	//});
	
  </script>
</html>

